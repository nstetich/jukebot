extends layout

block content
  style.
    #token {
      width: 20em;
    }

    #console {
      width: 30em;
      height: 30em;
    }

  script(src="/socket.io/socket.io.js")
  script(src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js")
  script.
    $(document).ready(function () {
      $('#connect').click(function (){
        // console.log("You clicked the button");
        $('#connect').prop('disabled', true);
        var token = $('#token').val();
        // console.log("Token: " + token + '\n');
        socket = io.connect('http://localhost:3000', {query: 'token=' + token});
        socket.on('news', function (data) {
          $('#console').append(JSON.stringify(data)).append('\n');
          socket.emit('my other event', { my: 'data' });
        });
      });
    });

  h1= title
  p Welcome to #{title}
  div
    label(for="token") Token:
    input#token(type="text" value="Nc2z411n+7iq/9Aid8i/llslViUK")
    button#connect Connect
  div
    textarea#console
